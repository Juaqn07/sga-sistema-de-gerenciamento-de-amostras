{% extends "core/base.html" %}
{% load static %}

{% block title %}Novo Processo{% endblock title %}

{% block page_css %}
    <link rel="stylesheet" href="{% static 'samples/css/criar-processo.css' %}">
{% endblock page_css %}

{% block content %}
<div class="justify-content-between align-items-center titulo-descricao">
  <h4 class="mb-0">Criar Novo Processo</h4>
  <small>
    Preencha as informações do processo e anexe os documentos necessários
  </small>
</div>

<div class="container-fluid p-4">
  <div class="row g-4">
    <div class="col-lg-8">
      
      <form class="bg-white p-4 rounded shadow-sm" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        
        {% if processo_form.errors or cliente_form.errors %}
            <div class="alert alert-danger">Corrija os erros abaixo.</div>
        {% endif %}

        <h5 class="mb-3 fw-semibold">Informações do Processo</h5>

        <div class="mb-3">
          <label class="form-label">Título do processo *</label>
          {{ processo_form.titulo }}
          <div class="text-danger small">{{ processo_form.titulo.errors }}</div>
        </div>

        <div class="mb-3">
          <label class="form-label">Descrição *</label>
          {{ processo_form.descricao }}
          <div class="text-danger small">{{ processo_form.descricao.errors }}</div>
        </div>

        <div class="mb-3">
          <label class="form-label">Tipo de amostra *</label>
          {{ processo_form.tipo_amostra }}
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Tipo de transporte</label>
            {{ processo_form.tipo_transporte }}
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Prioridade</label>
            {{ processo_form.prioridade }}
          </div>
        </div>

        <h5 class="mt-4 mb-3 fw-semibold">Dados do Cliente</h5>

        <div class="mb-3">
          <label class="form-label">Nome/Razão Social do Cliente *</label>
          {{ cliente_form.nome }}
        </div>

        <div class="mb-3">
          <label class="form-label">A/C (Aos Cuidados de) *</label>
          {{ cliente_form.responsavel }}
        </div>

        <h5 class="mt-4 mb-3 fw-semibold">Endereço de Entrega</h5>

        <div class="row">
          <div class="col-md-8 mb-3">
            <label class="form-label">Logradouro *</label>
            {{ cliente_form.logradouro }}
          </div>
          <div class="col-md-4 mb-3">
            <label class="form-label">Número *</label>
            {{ cliente_form.numero }}
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Complemento</label>
            {{ cliente_form.complemento }}
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Bairro *</label>
            {{ cliente_form.bairro }}
          </div>
        </div>

        <div class="row">
          <div class="col-md-5 mb-3">
            <label class="form-label">Cidade *</label>
            {{ cliente_form.cidade }}
          </div>
          <div class="col-md-2 mb-3">
            <label class="form-label">Estado *</label>
            {{ cliente_form.estado }}
          </div>
          <div class="col-md-5 mb-3">
            <label class="form-label">CEP *</label>
            {{ cliente_form.cep }}
          </div>
        </div>

        <h5 class="mt-4 mb-3 fw-semibold">Anexos</h5>
        <div class="anexos mb-4 p-4 border border-2 border-secondary-subtle rounded text-center bg-light position-relative">
          <p class="mb-1">Funcionalidade de anexos múltiplos será implementada em breve.</p>
          <small class="text-muted">
            Use o painel de detalhes após criar o processo para adicionar arquivos.
          </small>
        </div>

        <button type="submit" class="btn btn-primary w-100">
          Criar Processo
        </button>
      </form>
    </div>

    <div class="col-lg-4">
      <div class="bg-white p-4 rounded shadow-sm mb-3">
        <h5 class="fw-semibold mb-3">Resumo</h5>
        <p><strong>Criador:</strong><br />{{ user.get_full_name|default:user.username }}</p>
        <p><strong>Data:</strong><br />{% now "d/m/Y" %}</p>
        <div class="alert alert-info small mt-3 mb-0">
            <i class="bi bi-info-circle"></i>
            Após enviar, o processo receberá um código único automaticamente e será encaminhado para separação.
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}